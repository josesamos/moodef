<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>moodef: Defining Moodle Quizzes from R • moodef</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="moodef: Defining Moodle Quizzes from R">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">moodef</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/moodef.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/josesamos/moodef/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>moodef: Defining Moodle Quizzes from R</h1>
            
            <h4 data-toc-skip class="date">2025-01-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/josesamos/moodef/blob/main/vignettes/moodef.Rmd" class="external-link"><code>vignettes/moodef.Rmd</code></a></small>
      <div class="d-none name"><code>moodef.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><a href="https://moodle.org/" class="external-link"><em>Moodle</em></a> is a widespread
open source learning platform. It is the official teaching support
platform of the University of Granada (Spain), where we develop this
package.</p>
<p>The goal of the <code>moodef</code> package is to harness the power
of R to make defining <em>Moodle</em> elements easier. In particular,
this first version is focused on the definition of questions for
quizzes.</p>
<p>The process is as follows: we define the questions in R, from the
definition, we generate an XML file that we can import directly into
<em>Moodle</em>.</p>
<p>What does this package provide? On the one hand, we have simplified
the process of manually defining the questions, considering only the
essential parameters for each type. On the other hand, the package
offers an infrastructure that allows the automatic or semi-automatic
generation of questions from R: to define a question we simply need to
include a row in a data frame, a CSV file or an <em>Excel</em> file.</p>
<p>The rest of this document is structured as follows: First, the
question definition styles and the general process of defining questions
is presented. Next, we show the types of questions considered and how to
define them. Finally, the document ends with conclusions.</p>
</div>
<div class="section level2">
<h2 id="question-definition-styles">Question Definition Styles<a class="anchor" aria-label="anchor" href="#question-definition-styles"></a>
</h2>
<p>One of the primary objectives in designing this package has been to
simplify the question definition process.</p>
<p>For example, while it is possible to explicitly define the question
type, it can also be inferred from the provided definition. In certain
cases, you may need to specify additional details, such as the
orientation of answer presentation, but generally, the type is deduced
from the content of the definition.</p>
<p>At a global level, <strong>category level</strong>, several elements
can be defined for all questions, including:</p>
<ul>
<li>
<strong>Category</strong><br>
</li>
<li>
<strong>Copyright</strong><br>
</li>
<li>
<strong>License</strong><br>
</li>
<li>
<strong>Author</strong><br>
</li>
<li>
<strong>Feedback</strong> (general, correct, incorrect, or partially
correct responses)</li>
</ul>
<p>The package supports two styles of question definition: the
<strong>simple style</strong> and the <strong>extended style</strong>.
In the extended style, some of the global elements can be redefined for
individual questions.</p>
<div class="section level3">
<h3 id="simple-style">Simple Style<a class="anchor" aria-label="anchor" href="#simple-style"></a>
</h3>
<p>In the simple style, the most frequently used default values are
assumed for each question. This allows you to define only the specific
components of the question:</p>
<ul>
<li>
<strong>Statement</strong><br>
</li>
<li>An <strong>optional image</strong><br>
</li>
<li><strong>Answers</strong></li>
</ul>
<p>All questions belong to the same category and share the globally
defined values for copyright, license, author, and feedback.</p>
</div>
<div class="section level3">
<h3 id="extended-style">Extended Style<a class="anchor" aria-label="anchor" href="#extended-style"></a>
</h3>
<p>The extended style allows you to define or override additional
elements for each question. These elements are optional, and if not
explicitly defined, the global values are used. In addition to the
components of the simple style, the following elements can be specified
for each question:</p>
<ul>
<li>
<strong>Category</strong><br>
</li>
<li>
<strong>Identifier</strong><br>
</li>
<li>
<strong>Name</strong><br>
</li>
<li>
<strong>Author</strong><br>
</li>
<li>
<strong>Feedback</strong> (general, correct, incorrect, or partially
correct responses)<br>
</li>
<li>Feedback for each <strong>answer</strong><br>
</li>
<li><strong>Tags</strong></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="question-definition-process">Question Definition Process<a class="anchor" aria-label="anchor" href="#question-definition-process"></a>
</h2>
<p>Questions are defined within the framework of a <em>category</em> (a
<em>Moodle</em> concept). The <strong>category level</strong> includes
the general configuration parameters that apply to all questions, as
explained in the previous section.</p>
<p>Within the category definition, a set of questions is then defined.
Questions can be created either by:</p>
<ul>
<li>Using a specific function for each question</li>
<li>defining a data frame, or<br>
</li>
<li>importing a definition from a CSV or <em>Excel</em> file.</li>
</ul>
<p>Once the questions are defined, the XML structure can be generated
either as a string or as a file for direct import into
<em>Moodle</em>.</p>
<p>In this section, we will explain the three steps of this process:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Define the category</strong><br>
</li>
<li>
<strong>Define questions</strong><br>
</li>
<li><strong>Generate the XML file</strong></li>
</ol>
<div class="section level3">
<h3 id="define-the-category">Define the category<a class="anchor" aria-label="anchor" href="#define-the-category"></a>
</h3>
<p>To define a category we use the function
<code><a href="../reference/question_category.html">question_category()</a></code> and we have to indicate its name: It
creates an object of class <code>question_category</code>.</p>
<p>Below is a call to the function with the values of the parameters
that we usually define.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://josesamos.github.io/moodef/">moodef</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/question_category.html">question_category</a></span><span class="op">(</span>category <span class="op">=</span> <span class="st">'Initial test'</span>,</span>
<span>                        copyright <span class="op">=</span> <span class="st">'Copyright © 2025 Universidad de Granada'</span>,</span>
<span>                        license <span class="op">=</span> <span class="st">'License Creative Commons Attribution-ShareAlike 4.0'</span>,</span>
<span>                        author <span class="op">=</span> <span class="st">'Jose Samos'</span><span class="op">)</span></span></code></pre></div>
<p>In addition to the category name in the <code>category</code>
parameter, we define the <code>copyright</code>, <code>license</code>
and <code>author</code> parameters that will appear between comments in
the XML file associated with each question, as can be seen below.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">"1.0"</span><span class="ot"> encoding=</span><span class="st">"UTF-8"</span><span class="fu">?&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">"category"</span>&gt;</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>    &lt;<span class="kw">category</span>&gt; &lt;<span class="kw">text</span>&gt;$course$/top/Initial test&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">category</span>&gt;</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    &lt;<span class="kw">info</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">info</span>&gt;</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    &lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  &lt;/<span class="kw">question</span>&gt;</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>&lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">"..."</span>&gt;</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>...</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a>&lt;<span class="kw">questiontext</span><span class="ot"> format=</span><span class="st">"html"</span>&gt;</span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>  &lt;<span class="kw">text</span>&gt;<span class="bn">&lt;![CDATA[</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>     &lt;!-- Copyright © 2025 Universidad de Granada --&gt;</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>     &lt;!-- License Creative Commons Attribution-ShareAlike 4.0 --&gt;</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>     &lt;!-- Author: Jose Samos --&gt;</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>     ... <span class="bn">]]&gt;</span>&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>...</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>&lt;/<span class="kw">questiontext</span>&gt;</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>...</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
<p>Below is the function call being executed, including the values for
the remaining parameters. The simple and extended definitions cannot be
mixed. For this reason, we define a <code>question_category</code>
object for each type of definition to be used in the following
examples.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/question_category.html">question_category</a></span><span class="op">(</span>category <span class="op">=</span> <span class="st">'Initial test'</span>,</span>
<span>                        first_question_number <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                        copyright <span class="op">=</span> <span class="st">'Copyright © 2025 Universidad de Granada'</span>,</span>
<span>                        license <span class="op">=</span> <span class="st">'License Creative Commons Attribution-ShareAlike 4.0'</span>,</span>
<span>                        author <span class="op">=</span> <span class="st">'Jose Samos'</span>,</span>
<span>                        correct_feedback <span class="op">=</span> <span class="st">'Correct.'</span>,</span>
<span>                        partially_correct_feedback <span class="op">=</span> <span class="st">'Partially correct.'</span>,</span>
<span>                        incorrect_feedback <span class="op">=</span> <span class="st">'Incorrect.'</span>,</span>
<span>                        adapt_images <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                        width <span class="op">=</span> <span class="fl">800</span>,</span>
<span>                        height <span class="op">=</span> <span class="fl">600</span><span class="op">)</span></span>
<span></span>
<span><span class="va">qc_extended</span> <span class="op">&lt;-</span> <span class="va">qc</span></span></code></pre></div>
<p>We are going to discuss the use of each parameter.</p>
<p>Questions have a name, which is displayed as a summary in the
<em>Moodle</em> question bank. In the extended style, the name can be
explicitly defined. However, if it is not defined—or in the case of the
simple style—we generate the name by combining the question number
(obtained from <code>first_question_number</code> parameter), the
deduced question type, and the beginning of its statement. For example,
the following is a generated question name.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">"1.0"</span><span class="ot"> encoding=</span><span class="st">"UTF-8"</span><span class="fu">?&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>...  </span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>&lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">"multichoice"</span>&gt;</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>&lt;<span class="kw">name</span>&gt; &lt;<span class="kw">text</span>&gt;q_001_multichoice_what_are_the_basic_arithmetic_operations&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">name</span>&gt;</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>...</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
<p>Using the parameter <code>first_question_number</code>, the number
that will be assigned to the first question is defined, with a
three-digit format. This number will increase for each question.</p>
<p>For each question we can indicate feedback text for cases in which
the answer is correct, partially correct or incorrect: The corresponding
values are provided by the <code>correct_feedback</code>,
<code>partially_correct_feedback</code> and
<code>incorrect_feedback</code> parameters.</p>
<p>Finally, each question stem can include an image. Sometimes the
images we use have very different sizes and require a prior
transformation to homogenize their presentation. This transformation can
be carried out automatically by indicating it using the parameter
<code>adapt_images</code> (default is <code>FALSE</code>). Using the
parameters <code>width</code> and <code>height</code> we indicate the
size of the resulting image. It is advisable to test this functionality
and adjust the size accordingly by viewing the result when defining a
questionnaire in <em>Moodle</em>. <strong>The original images are not
modified</strong>, only those that are embedded in the XML file.</p>
</div>
<div class="section level3">
<h3 id="define-questions">Define questions<a class="anchor" aria-label="anchor" href="#define-questions"></a>
</h3>
<p>Once we have a <code>question_category</code> object created, we can
define questions that are added to it.</p>
<p>We can define the questions one by one using a definition function or
in bulk using a data frame, a CSV file or an <em>Excel</em> file. Below
we show the possibilities offered.</p>
<div class="section level4">
<h4 id="definition-function">Definition function<a class="anchor" aria-label="anchor" href="#definition-function"></a>
</h4>
<p>We provide two functions for defining questions:
<code><a href="../reference/define_question.html">define_question()</a></code> and
<code><a href="../reference/define_extended_question.html">define_extended_question()</a></code>. These are used to define
questions in the simple style and the extended style, respectively.</p>
<div class="section level5">
<h5 id="simple-style-1">Simple Style<a class="anchor" aria-label="anchor" href="#simple-style-1"></a>
</h5>
<p>The minimum we have to define about a question is its statement.
Here’s how to define a question using the <code><a href="../reference/define_question.html">define_question()</a></code>
function.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'Describe the addition operation.'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Below is the definition of a simple style question with all possible
parameters, which we explain below.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">'v'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'Place the name of the operations as they appear in the figure.'</span>,</span>
<span>    image <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ops.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span>,</span>
<span>    image_alt <span class="op">=</span> <span class="st">'Operations'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'Addition'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'Multiplication'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'Division'</span>,</span>
<span>    a_3 <span class="op">=</span> <span class="st">'Subtraction'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The type of question can be explicitly indicated using its associated
code. If it is not specified, it is deduced from the statement and the
answers. In this case, the <code>type</code> parameter is used to
distinguish between two types of questions and to specify the
presentation of the answers. It can take four values: empty,
<code>h</code>, <code>v</code>, or <code>x</code>. In the example above,
the value is <code>v</code>. As we will see in the next section, this
indicates that it is not a <code>multichoice</code> question and that
the answers are displayed vertically.</p>
<p>The question statement is defined using the <code>question</code>
parameter.</p>
<p>An image can be displayed after the statement. The file containing
the image is specified using the <code>image</code> parameter. In the
example, we use the name of a file included in this package. Each image
must also include a description, which is defined with the
<code>image_alt</code> parameter.</p>
<p>Finally, the answers to the question are defined. The first answer is
indicated using the <code>answer</code> parameter. If additional answers
are needed, they can be included as variable parameters using any
parameter names (or no names), as many as required.</p>
</div>
<div class="section level5">
<h5 id="extended-style-1">Extended Style<a class="anchor" aria-label="anchor" href="#extended-style-1"></a>
</h5>
<p>We can achieve the same definition as above using the extended style.
In this case, the result will be exactly the same as before, but this
function allows for the definition of additional parameters.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc_extended</span> <span class="op">&lt;-</span> <span class="va">qc_extended</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_extended_question.html">define_extended_question</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">'v'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'Place the name of the operations as they appear in the figure.'</span>,</span>
<span>    image <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ops.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span>,</span>
<span>    image_alt <span class="op">=</span> <span class="st">'Operations'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'Addition'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'Multiplication'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'Division'</span>,</span>
<span>    a_3 <span class="op">=</span> <span class="st">'Subtraction'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The previous definition is equivalent to the following. In the code
below, the default obtained values have been used. We could modify any
of the indicated values or add new ones according to our needs. For
example, additional answers, feedback for the answers, and tags to
describe the questions can be defined.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc_extended</span> <span class="op">&lt;-</span> <span class="va">qc_extended</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_extended_question.html">define_extended_question</a></span><span class="op">(</span></span>
<span>    category <span class="op">=</span> <span class="st">'Initial test'</span>,</span>
<span>    type <span class="op">=</span> <span class="st">'ordering&lt;|&gt;v'</span>,</span>
<span>    id <span class="op">=</span> <span class="st">''</span>,</span>
<span>    name <span class="op">=</span> <span class="st">'q_001_ordering_v_place_the_name_of_the_operations_as_they'</span>,</span>
<span>    author <span class="op">=</span> <span class="st">'Jose Samos'</span>,</span>
<span>    fb_general <span class="op">=</span> <span class="st">''</span>,</span>
<span>    fb_correct <span class="op">=</span> <span class="st">'Correct.'</span>,</span>
<span>    fb_partially <span class="op">=</span> <span class="st">'Partially correct.'</span>,</span>
<span>    fb_incorrect <span class="op">=</span> <span class="st">'Incorrect.'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'Place the name of the operations as they appear in the figure.'</span>,</span>
<span>    image <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ops.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span>,</span>
<span>    image_alt <span class="op">=</span> <span class="st">'Operations'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'Addition'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'Multiplication'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'Division'</span>,</span>
<span>    a_3 <span class="op">=</span> <span class="st">'Subtraction'</span>,</span>
<span>    fb_a_1 <span class="op">=</span> <span class="st">''</span>,</span>
<span>    fb_a_2 <span class="op">=</span> <span class="st">''</span>,</span>
<span>    fb_a_3 <span class="op">=</span> <span class="st">''</span>,</span>
<span>    tag_1 <span class="op">=</span> <span class="st">''</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="definition-using-a-csv-file-or-an-excel-file">Definition using a CSV file or an <em>Excel</em> file<a class="anchor" aria-label="anchor" href="#definition-using-a-csv-file-or-an-excel-file"></a>
</h4>
<p>We can create an empty CSV file with the necessary columns using the
<code><a href="../reference/create_question_csv.html">create_question_csv()</a></code> function. In addition to the file
name, we can specify the separator to use (<code>,</code> or
<code>;</code>), and if we need to use the extended style, we indicate
it with the parameter <code>extended = TRUE</code> (default is
<code>FALSE</code>).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/create_question_csv.html">create_question_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.csv'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The content of the file for the simple style is shown below.</p>
<pre class="csv"><code>"type","question","image","image_alt","answer","a_1","a_2","a_3"</code></pre>
<p>For the extended style, the content is also shown afterward.</p>
<pre class="csv"><code>"category", "type", "id", "name", "author", "fb_general", "fb_correct", 
"fb_partially", "fb_incorrect", "question", "image", "image_alt", 
"answer", "a_1", "a_2", "a_3", "a_4", "fb_answer", "fb_a_1", 
"fb_a_2", "fb_a_3", "fb_a_4", "tag_1", "tag_2", "tag_3"</code></pre>
<p>We can add as many additional columns as we deem necessary. In the
case of the extended style, the same number of answer columns as
feedback columns must be included, and at least one tags column must be
present (even if the values in these columns are not defined).</p>
<p>From that file, we can include rows using a text editor, R or some
tool to edit CSV files in spreadsheet format.</p>
<p>Below is the content of a CSV file included in this package for the
simple style.</p>
<pre class="csv"><code>"type","question","image","image_alt","answer","a_1","a_2","a_3"
,"What are the basic arithmetic operations?",,,"Addition, subtraction, multiplication and division.","Addition and subtraction.","Addition, subtraction, multiplication, division and square root.",
,"Match each operation with its symbol.",,,"Addition&lt;|&gt;+","Subtraction&lt;|&gt;-","Multiplication&lt;|&gt;*",
,"The square root is a basic arithmetic operation.",,,"False",,,
,"What basic operation does it have as a ""+"" symbol?",,,"Addition",,,
,"The symbol for addition is [[1]], the symbol for subtraction is [[2]].",,,"+","-",,
"x","The symbol for addition is [[1]], the symbol for subtraction is [[2]].",,,"+","-",,
"h","Sort the result from smallest to largest.",,,"6/2","6-2","6+2","6*2"
"x","Sort the result from smallest to largest.",,,"6/2","6-2","6+2","6*2"
,"What is the result of SQRT(4)?",,,"2","-2",,
,"What is the result of 4/3?",,,"1.33&lt;|&gt;0.03",,,
,"Describe the addition operation.",,,,,,</code></pre>
<p>Once available, we can generate all the questions using the
<code><a href="../reference/define_questions_from_csv.html">define_questions_from_csv()</a></code> function, as shown below.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"questions.csv"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span></span>
<span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_questions_from_csv.html">define_questions_from_csv</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></code></pre></div>
<p>There are types of questions in which two string values must be
indicated for each answer. The criterion we have adopted to include two
values in a cell is to use a separator and define them in a single
string, the separator is <code>&lt;|&gt;</code>: It can be seen in the
definition of some of the previous questions, for example,
<code>Addition&lt;|&gt;+</code> or <code>1.33&lt;|&gt;0.03</code>.</p>
<p>In this example, questions with images have not been included due to
the difficulty of referencing the image files in the package from the
CSV file, but they can be included without any problem.</p>
<p>For <em>Excel</em> files the definition is carried out in the same
way. The corresponding functions are:
<code><a href="../reference/create_question_excel.html">create_question_excel()</a></code> and
<code><a href="../reference/define_questions_from_excel.html">define_questions_from_excel()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="definition-using-a-data-frame">Definition using a data frame<a class="anchor" aria-label="anchor" href="#definition-using-a-data-frame"></a>
</h4>
<p>We can also define questions in bulk using a data frame. An empty
data frame can be created with the
<code><a href="../reference/create_question_data_frame.html">create_question_data_frame()</a></code> function (which can also be
used with the parameter <code>extended = FALSE</code>, as shown in the
previous example for the CSV file) or read from a CSV file using the
<code><a href="../reference/read_question_csv.html">read_question_csv()</a></code> function. In this example, we will read
a data frame that includes images in the question statements.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"questions_image.csv"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_question_csv.html">read_question_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">file</span><span class="op">)</span></span></code></pre></div>
<p>The content of the data frame is shown below.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html" class="external-link">pandoc.table</a></span><span class="op">(</span><span class="va">df</span>, split.table <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="5%">
<col width="25%">
<col width="15%">
<col width="10%">
<col width="8%">
<col width="13%">
<col width="8%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="center">type</th>
<th align="center">question</th>
<th align="center">image</th>
<th align="center">image_alt</th>
<th align="center">answer</th>
<th align="center">a_1</th>
<th align="center">a_2</th>
<th align="center">a_3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"></td>
<td align="center">What basic operation has the symbol shown in the
figure as its symbol?</td>
<td align="center">xxxxx/divide.png</td>
<td align="center">Operation</td>
<td align="center">Division</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr class="even">
<td align="center">x</td>
<td align="center">Place the name of the operations as they appear in
the figure.</td>
<td align="center">xxxxx/ops.png</td>
<td align="center">Operations</td>
<td align="center">Addition</td>
<td align="center">Multiplication</td>
<td align="center">Division</td>
<td align="center">Subtraction</td>
</tr>
</tbody>
</table>
<p>In this case we are going to update the figure data with the files
included in the package (in a local example, this is not necessary).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">[</span><span class="fl">1</span>, <span class="st">'image'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"divide.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">[</span><span class="fl">2</span>, <span class="st">'image'</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ops.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span></span></code></pre></div>
<p>From R we can add new rows or modify existing ones. As we have
explained in the previous section, there are questions in which we need
to define two values in a cell using a separator:
<code>&lt;|&gt;</code>. To facilitate the definition of these cells, we
have defined the function <code><a href="../reference/vector_to_string.html">vector_to_string()</a></code> that, from a
vector, generates a string including that separator, as shown in the
following example.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/vector_to_string.html">vector_to_string</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Addition'</span>, <span class="st">'+'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">s</span></span>
<span><span class="co">#&gt; [1] "Addition&lt;|&gt;+"</span></span></code></pre></div>
<p>Once the definition of the questions in the data frame is finished,
we can add it to the <code>question_category</code> object using the
<code><a href="../reference/define_questions_from_data_frame.html">define_questions_from_data_frame()</a></code> function, as it’s shown
in the following.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_questions_from_data_frame.html">define_questions_from_data_frame</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="generate-the-xml-file">Generate the XML file<a class="anchor" aria-label="anchor" href="#generate-the-xml-file"></a>
</h3>
<p>Once the questions we need have been defined, the next step is to
generate the XML file. We use the <code><a href="../reference/generate_xml_file.html">generate_xml_file()</a></code>
function, to which we have to indicate a file name.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">'.xml'</span><span class="op">)</span></span>
<span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/generate_xml_file.html">generate_xml_file</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span></code></pre></div>
<p>The generated file is the one that we can import from <em>Moodle</em>
in the <em>Question Bank</em> section.</p>
<p>If we have included images, the file size increases considerably
because they are embedded in XML (not referenced).</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">file</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 217401</span></span></code></pre></div>
<p>The definition file for a single question is shown below.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">&lt;?xml</span><span class="ot"> version=</span><span class="st">"1.0"</span><span class="ot"> encoding=</span><span class="st">"UTF-8"</span><span class="fu">?&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>&lt;<span class="kw">quiz</span>&gt;</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">"category"</span>&gt;</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>    &lt;<span class="kw">category</span>&gt; &lt;<span class="kw">text</span>&gt;$course$/top/Initial test&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">category</span>&gt;</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>    &lt;<span class="kw">info</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">info</span>&gt;</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    &lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  &lt;/<span class="kw">question</span>&gt;</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>  &lt;<span class="kw">question</span><span class="ot"> type=</span><span class="st">"multichoice"</span>&gt;</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>&lt;<span class="kw">name</span>&gt; &lt;<span class="kw">text</span>&gt;q_001_multichoice_what_are_the_basic_arithmetic_operations&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">name</span>&gt;</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>&lt;<span class="kw">questiontext</span><span class="ot"> format=</span><span class="st">"html"</span>&gt;</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>  &lt;<span class="kw">text</span>&gt;<span class="bn">&lt;![CDATA[</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a>     &lt;!-- Copyright © 2025 Universidad de Granada --&gt;</span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>     &lt;!-- License Creative Commons Attribution-ShareAlike 4.0 --&gt;</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>     &lt;!-- Author: Jose Samos --&gt;</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>     &lt;p&gt;What are the basic arithmetic operations?&lt;/p&gt;<span class="bn">]]&gt;</span>&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>     </span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>&lt;/<span class="kw">questiontext</span>&gt;</span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>&lt;<span class="kw">generalfeedback</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">generalfeedback</span>&gt;</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a>&lt;<span class="kw">defaultgrade</span>&gt;1.0000000&lt;/<span class="kw">defaultgrade</span>&gt;</span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a>&lt;<span class="kw">penalty</span>&gt;0.5&lt;/<span class="kw">penalty</span>&gt;</span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a>&lt;<span class="kw">hidden</span>&gt;0&lt;/<span class="kw">hidden</span>&gt;</span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a>&lt;<span class="kw">idnumber</span>&gt;&lt;/<span class="kw">idnumber</span>&gt;</span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a>&lt;<span class="kw">single</span>&gt;true&lt;/<span class="kw">single</span>&gt;</span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a>&lt;<span class="kw">shuffleanswers</span>&gt;true&lt;/<span class="kw">shuffleanswers</span>&gt;</span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a>&lt;<span class="kw">answernumbering</span>&gt;abc&lt;/<span class="kw">answernumbering</span>&gt;</span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a>&lt;<span class="kw">showstandardinstruction</span>&gt;0&lt;/<span class="kw">showstandardinstruction</span>&gt;</span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a>&lt;<span class="kw">correctfeedback</span><span class="ot"> format=</span><span class="st">"moodle_auto_format"</span>&gt; &lt;<span class="kw">text</span>&gt;Correct.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">correctfeedback</span>&gt;</span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a>&lt;<span class="kw">partiallycorrectfeedback</span><span class="ot"> format=</span><span class="st">"moodle_auto_format"</span>&gt; &lt;<span class="kw">text</span>&gt;&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">partiallycorrectfeedback</span>&gt;</span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a>&lt;<span class="kw">incorrectfeedback</span><span class="ot"> format=</span><span class="st">"moodle_auto_format"</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">incorrectfeedback</span>&gt;</span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">"100"</span><span class="ot"> format=</span><span class="st">"html"</span>&gt;</span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition, subtraction, multiplication and division.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;Correct.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">"-50.000000000000000"</span><span class="ot"> format=</span><span class="st">"html"</span>&gt;</span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition and subtraction.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a>&lt;<span class="kw">answer</span><span class="ot"> fraction=</span><span class="st">"-50.000000000000000"</span><span class="ot"> format=</span><span class="st">"html"</span>&gt;</span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a>   &lt;<span class="kw">text</span>&gt;Addition, subtraction, multiplication, division and square root.&lt;/<span class="kw">text</span>&gt;</span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a>   &lt;<span class="kw">feedback</span><span class="ot"> format=</span><span class="st">"html"</span>&gt; &lt;<span class="kw">text</span>&gt;Incorrect.&lt;/<span class="kw">text</span>&gt; &lt;/<span class="kw">feedback</span>&gt;</span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a>&lt;/<span class="kw">answer</span>&gt;</span>
<span id="cb21-42"><a href="#cb21-42" tabindex="-1"></a>&lt;/<span class="kw">question</span>&gt;</span>
<span id="cb21-43"><a href="#cb21-43" tabindex="-1"></a>&lt;/<span class="kw">quiz</span>&gt;</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="kind-of-questions">Kind of questions<a class="anchor" aria-label="anchor" href="#kind-of-questions"></a>
</h2>
<p>We have simplified and generalized the definition process for 10
types of questions, so that we do not even have to indicate the type to
define them, it is deduced from the definition: It depends on the value
of the <code>answer</code> field. In some cases a character in the
<code>type</code> field is used to distinguish between two types whose
definition is identical or to indicate the orientation of the answers
(horizontal or vertical), as we will see below.</p>
<p>For each kind of questions, the code for its type is specified,
followed by (separated by ‘:’) the code that can also be used to deduce
the same type. When no value is required, it is expressed as
<code>''</code> (there is no need to include the quotation marks; simply
leave the cell blank or use the default parameter value).</p>
<div class="section level3">
<h3 id="essay-essay">Essay (<code>essay</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#essay-essay"></a>
</h3>
<p>Only includes the question statement with or without an image (the
<code>answer</code> field is empty). The answer to the question is made
through free text. Below is an example that we had shown before.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'Describe the addition operation.'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="truefalse-truefalse">True/False (<code>truefalse</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#truefalse-truefalse"></a>
</h3>
<p>The <code>answer</code> field contains the correct answer. If this is
one of the literals corresponding to the Boolean values
(<code>'True'</code> or <code>'False'</code>), nothing else needs to be
indicated. Here is an example.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'The square root is a basic arithmetic operation.'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'False'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>If we use the extended style for defining the question, we can
specify feedback for each answer.</p>
</div>
<div class="section level3">
<h3 id="numerical-numerical">Numerical (<code>numerical</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#numerical-numerical"></a>
</h3>
<p>If the value of field <code>answer</code> is a number with or without
decimal places, or a vector of two numbers, it is a
<code>numerical</code> question.</p>
<p>In this type of questions we only have to indicate correct values of
the answer. If, instead of a value, we indicate a vector of two values,
the second number represents the margin of error in which the answer is
accepted as valid. Below are two examples.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'What is the result of SQRT(4)?'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'2'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'-2'</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'What is the result of 4/3?'</span>,</span>
<span>    answer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'1.33'</span>, <span class="st">'0.03'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>In this case as well, with the extended definition style, feedback
can be defined for each answer.</p>
</div>
<div class="section level3">
<h3 id="short-answer-shortanswer">Short Answer (<code>shortanswer</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#short-answer-shortanswer"></a>
</h3>
<p>If only field <code>answer</code> is defined and it is not a Boolean
or numeric value, it is of type <code>shortanswer</code>, for
example:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'What basic operation does it have as a + symbol?'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'Addition'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Feedback for the answer can also be defined using the extended
style.</p>
</div>
<div class="section level3">
<h3 id="multiple-choice-multichoice">Multiple Choice (<code>multichoice</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#multiple-choice-multichoice"></a>
</h3>
<p>If field <code>answer</code> and the rest of the answers are of type
string, it is of type <code>multichoice</code>. The content of field
<code>answer</code> is the correct answer. Here is an example.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'What are the basic arithmetic operations?'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'Addition, subtraction, multiplication and division.'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'Addition and subtraction.'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'Addition, subtraction, multiplication, division and square root.'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>As mentioned earlier, feedback for the answers can be specified using
the extended definition style.</p>
</div>
<div class="section level3">
<h3 id="ordering-orderingh-h-or-orderingv-v">Ordering (<code>ordering&lt;|&gt;h</code>: <code>h</code> or
<code>ordering&lt;|&gt;v</code>: <code>v</code>)<a class="anchor" aria-label="anchor" href="#ordering-orderingh-h-or-orderingv-v"></a>
</h3>
<p>The <code>ordering</code> type is defined as a
<code>multichoice</code> type. To differentiate it, the
<code>type</code> parameter is assigned a value other than its default
empty value. Assigning <code>h</code> displays the answers horizontally,
while <code>v</code> displays them vertically. To specify the detailed
name, you must also indicate the orientation using
<code>ordering&lt;|&gt;h</code> for horizontal or
<code>ordering&lt;|&gt;v</code> for vertical.</p>
<p>In the example below, the two questions are the same, only the way
the answers are presented changes.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">'h'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'Order the result from smallest to largest.'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'6/2'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'6-2'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'6+2'</span>,</span>
<span>    a_3 <span class="op">=</span> <span class="st">'6*2'</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">'v'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'Order the result from smallest to largest.'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'6/2'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'6-2'</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="st">'6+2'</span>,</span>
<span>    a_3 <span class="op">=</span> <span class="st">'6*2'</span></span>
<span>  <span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="drag-and-drop-into-text-ddwtos-and-select-missing-words-gapselect-x">Drag and Drop into Text (<code>ddwtos</code>: <code>''</code>) and
Select Missing Words (<code>gapselect</code>: <code>x</code>)<a class="anchor" aria-label="anchor" href="#drag-and-drop-into-text-ddwtos-and-select-missing-words-gapselect-x"></a>
</h3>
<p>In questions of these types the objective is to fill in the gaps with
the terms indicated. If the variable <code>type</code> has the default
value (empty string), the values are filled by dragging and dropping. If
we define a value <code>x</code> in the variable <code>type</code>, they
are filled by selecting from a list.</p>
<p>Gaps in the statement are defined by numbers in double brackets, as
shown in the following examples.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'The symbol for addition is [[1]], the symbol for subtraction is [[2]].'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'+'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'-'</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    type <span class="op">=</span> <span class="st">'x'</span>,</span>
<span>    question <span class="op">=</span> <span class="st">'The symbol for addition is [[1]], the symbol for subtraction is [[2]].'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'+'</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="st">'-'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We must specify as many answers as there are gaps, in the correct
order. Alternatively, a single gap can be defined with multiple
selectable answers, where the correct answer will be the first one.</p>
</div>
<div class="section level3">
<h3 id="matching-matching">Matching (<code>matching</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#matching-matching"></a>
</h3>
<p>If the answers are made up of vectors of pairs of strings, we are in
a type <code>matching</code> question. Below we show an example.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'Match each operation with its symbol.'</span>,</span>
<span>    answer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Addition'</span>, <span class="st">'+'</span><span class="op">)</span>,</span>
<span>    a_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Subtraction'</span>, <span class="st">'-'</span><span class="op">)</span>,</span>
<span>    a_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Multiplication'</span>, <span class="st">'*'</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="drag-and-drop-markers-ddmarker">Drag and Drop Markers (<code>ddmarker</code>: <code>''</code>)<a class="anchor" aria-label="anchor" href="#drag-and-drop-markers-ddmarker"></a>
</h3>
<p>The <code>ddmarker</code> question type allows users to drag markers
onto predefined areas of an image. Each marker corresponds to a specific
target, enabling visually interactive and location-based
assessments.</p>
<p>In this case, even if the <strong>category level</strong> specifies
that images should be transformed, the image remains unchanged because
the definition specifies the position of the image where the cursors
must be placed for the answer to be correct.</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qc</span> <span class="op">&lt;-</span> <span class="va">qc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/define_question.html">define_question</a></span><span class="op">(</span></span>
<span>    question <span class="op">=</span> <span class="st">'Place the cursor over the indicated operation.'</span>,</span>
<span>    image <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ops.png"</span>, package <span class="op">=</span> <span class="st">"moodef"</span><span class="op">)</span>,</span>
<span>    image_alt <span class="op">=</span> <span class="st">'Operations'</span>,</span>
<span>    answer <span class="op">=</span> <span class="st">'rectangle&lt;|&gt;142,85;554,553&lt;|&gt;Sum'</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="conclusions">Conclusions<a class="anchor" aria-label="anchor" href="#conclusions"></a>
</h2>
<p>The <code>moodef</code> package makes it easy to define questions for
<em>Moodle</em> quizzes.</p>
<p>We can define the questions one by one by calling a function or in
bulk using a CSV file, <em>Excel</em> file or a data frame. We have
simplified and generalized the definition so that the types considered
are defined with the same parameters.</p>
<p>Two definition styles are offered: simple and extended. The extended
mode allows defining elements that are considered default in the simple
mode.</p>
<p>The functionality offered by the package can be used to manually
define the questions quickly or to define them automatically or
semi-automatically from R.</p>
<p>The result of the definition process is an XML file that can be
imported directly into the <em>Moodle</em> question bank.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jose Samos.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
